import"../chunks/DsnmJJEf.js";import{i as tt}from"../chunks/ByiWQUhW.js";import{C as Me,p as ie,y as at,a0 as Ge,q as rt,o as nt,L as t,a1 as st,z as ot,H as lt,A as ze,D as Ne,x as ge,a2 as dt,a3 as it,a4 as We,a5 as ut,a6 as xe,a7 as Je,i as vt,_ as be,a8 as Qe,a9 as ct,aa as Ke,ab as pt,ac as bt,ad as Se,ae as je,af as mt,ag as ft,ah as xt,ai as ht,aj as _t,ak as yt,al as gt,am as wt,t as kt,e as Dt,an as Et,ao as At,S as Rt,T as O,R as C,V as Tt,W as n,X as r,Y as s,U as de,Z as H,P as $e,Q as Be,$ as Ze,ap as Ae}from"../chunks/CTr3IETd.js";import{s as w,e as S}from"../chunks/D32C67cN.js";import{i as pe}from"../chunks/B-4Jm7l7.js";import{a as Pe,s as Re,r as Le}from"../chunks/DGvbQdW7.js";function Ve(a,o){return o}function Ht(a,o,e){for(var v=a.items,l=[],d=o.length,c=0;c<d;c++)ht(o[c].e,l,!0);var m=d>0&&l.length===0&&e!==null;if(m){var i=e.parentNode;_t(i),i.append(e),v.clear(),ee(a,o[0].prev,o[d-1].next)}yt(l,()=>{for(var _=0;_<d;_++){var k=o[_];m||(v.delete(k.k),ee(a,k.prev,k.next)),je(k.e,!m)}})}function Ue(a,o,e,v,l,d=null){var c=a,m={flags:o,items:new Map,first:null};{var i=a;c=ie?Me(at(i)):i.appendChild(Ge())}ie&&rt();var _=null,k=!1,te=new Map,u=st(()=>{var x=e();return vt(x)?x:x==null?[]:Je(x)}),g,p;function b(){Ct(p,g,m,te,c,l,o,v,e),d!==null&&(g.length===0?_?Ke(_):_=We(()=>d(c)):_!==null&&pt(_,()=>{_=null}))}nt(()=>{p??=gt,g=t(u);var x=g.length;if(k&&x===0)return;k=x===0;let Q=!1;if(ie){var L=ot(c)===lt;L!==(x===0)&&(c=ze(),Me(c),Ne(!1),Q=!0)}if(ie){for(var h=null,R,y=0;y<x;y++){if(ge.nodeType===dt&&ge.data===it){c=ge,Q=!0,Ne(!1);break}var Y=g[y],f=v(Y,y);R=Xe(ge,m,h,null,Y,f,y,l,o,e),m.items.set(f,R),h=R}x>0&&Me(ze())}if(ie)x===0&&d&&(_=We(()=>d(c)));else if(ut()){var T=new Set,A=xe;for(y=0;y<x;y+=1){Y=g[y],f=v(Y,y);var q=m.items.get(f)??te.get(f);q?et(q,Y,y):(R=Xe(null,m,null,null,Y,f,y,l,o,e,!0),te.set(f,R)),T.add(f)}for(const[Z,I]of m.items)T.has(Z)||A.skipped_effects.add(I.e);A.add_callback(b)}else b();Q&&Ne(!0),t(u)}),ie&&(c=ge)}function Ct(a,o,e,v,l,d,c,m,i){var _=o.length,k=e.items,te=e.first,u=te,g,p=null,b=[],x=[],Q,L,h,R;for(R=0;R<_;R+=1){if(Q=o[R],L=m(Q,R),h=k.get(L),h===void 0){var y=v.get(L);if(y!==void 0){v.delete(L),k.set(L,y);var Y=p?p.next:u;ee(e,p,y),ee(e,y,Y),Fe(y,Y,l),p=y}else{var f=u?u.e.nodes_start:l;p=Xe(f,e,p,p===null?e.first:p.next,Q,L,R,d,c,i)}k.set(L,p),b=[],x=[],u=p.next;continue}if(et(h,Q,R),(h.e.f&Se)!==0&&Ke(h.e),h!==u){if(g!==void 0&&g.has(h)){if(b.length<x.length){var T=x[0],A;p=T.prev;var q=b[0],Z=b[b.length-1];for(A=0;A<b.length;A+=1)Fe(b[A],T,l);for(A=0;A<x.length;A+=1)g.delete(x[A]);ee(e,q.prev,Z.next),ee(e,p,q),ee(e,Z,T),u=T,p=Z,R-=1,b=[],x=[]}else g.delete(h),Fe(h,u,l),ee(e,h.prev,h.next),ee(e,h,p===null?e.first:p.next),ee(e,p,h),p=h;continue}for(b=[],x=[];u!==null&&u.k!==L;)(u.e.f&Se)===0&&(g??=new Set).add(u),x.push(u),u=u.next;if(u===null)continue;h=u}b.push(h),p=h,u=h.next}if(u!==null||g!==void 0){for(var I=g===void 0?[]:Je(g);u!==null;)(u.e.f&Se)===0&&I.push(u),u=u.next;var W=I.length;if(W>0){var X=_===0?l:null;Ht(e,I,X)}}a.first=e.first&&e.first.e,a.last=p&&p.e;for(var oe of v.values())je(oe.e);v.clear()}function et(a,o,e,v){ct(a.v,o),a.i=e}function Xe(a,o,e,v,l,d,c,m,i,_,k){var te=(i&mt)!==0,u=(i&ft)===0,g=te?u?be(l,!1,!1):Qe(l):l,p=(i&bt)===0?c:Qe(c),b={i:p,v:g,k:d,a:null,e:null,prev:e,next:v};try{if(a===null){var x=document.createDocumentFragment();x.append(a=Ge())}return b.e=We(()=>m(a,g,p,_),ie),b.e.prev=e&&e.e,b.e.next=v&&v.e,e===null?k||(o.first=b):(e.next=b,e.e.next=b.e),v!==null&&(v.prev=b,v.e.prev=b.e),b}finally{}}function Fe(a,o,e){for(var v=a.next?a.next.e.nodes_start:e,l=o?o.e.nodes_start:e,d=a.e.nodes_start;d!==null&&d!==v;){var c=xt(d);l.before(d),d=c}}function ee(a,o,e){o===null?a.first=e:(o.next=e,o.e.next=e&&e.e),e!==null&&(e.prev=o,e.e.prev=o&&o.e)}function Oe(a,o,e=o){var v=new WeakSet;wt(a,"input",async l=>{var d=l?a.defaultValue:a.value;if(d=Ye(a)?qe(d):d,e(d),xe!==null&&v.add(xe),await kt(),d!==(d=o())){var c=a.selectionStart,m=a.selectionEnd,i=a.value.length;if(a.value=d??"",m!==null){var _=a.value.length;c===m&&m===i&&_>i?(a.selectionStart=_,a.selectionEnd=_):(a.selectionStart=c,a.selectionEnd=Math.min(m,_))}}}),(ie&&a.defaultValue!==a.value||Dt(o)==null&&a.value)&&(e(Ye(a)?qe(a.value):a.value),xe!==null&&v.add(xe)),Et(()=>{var l=o();if(a===document.activeElement){var d=At??xe;if(v.has(d))return}Ye(a)&&l===qe(a.value)||a.type==="date"&&!l&&!a.value||l!==a.value&&(a.value=l??"")})}function Ye(a){var o=a.type;return o==="number"||o==="range"}function qe(a){return a===""?null:+a}var It=O('<span class="inline-block py-1 px-2 rounded text-xs ml-2 bg-red-500 text-white"> </span>'),Mt=O('<span class="inline-block py-1 px-2 rounded text-xs ml-2 bg-blue-500 text-white"> </span>'),Nt=O('<tr role="button" tabindex="0"><td class="py-4 px-6 whitespace-nowrap"></td><td class="py-4 px-6 whitespace-nowrap"> </td><td class="py-4 px-6 whitespace-nowrap"> </td><td class="py-4 px-6 whitespace-nowrap"> </td><td class="py-4 px-6 whitespace-nowrap"> <!> <!></td></tr>'),St=O('<div><header class="text-start mb-8"><h1 class="text-green-600 text-2xl font-bold m-0">Arimoney Финансы</h1></header> <div class="bg-white rounded-2xl p-6 mb-6 shadow-md"><div><h3 class="m-0 mb-2 text-gray-500 text-sm font-normal">Общая сумма займа</h3> <p class="text-3xl font-bold m-0 text-gray-900"> </p></div> <div class="mt-5"><div class="flex h-8 rounded-lg overflow-hidden mb-2"><div class="bg-green-500"></div> <div class="bg-red-500"></div> <div class="bg-blue-500"></div></div> <div class="flex justify-between"><span class="text-xs py-1 px-2 rounded bg-green-100 text-green-700"> </span> <span class="text-xs py-1 px-2 rounded bg-red-100 text-red-700"> </span> <span class="text-xs py-1 px-2 rounded bg-blue-100 text-blue-700"> </span></div></div></div> <div class="flex items-center justify-between"></div> <div class="flex bg-gray-100 rounded-lg p-1"><button>Текущие заемщики</button> <button>Все заемщики</button></div> <div class="flex items-center justify-between mb-5"></div> <button class="w-full bg-blue-500 hover:bg-blue-700 text-white text-base font-medium py-4 px-6 rounded-lg mb-6 cursor-pointer transition-all duration-300">+ Добавить заемщика</button> <div class="bg-white rounded-2xl shadow-md overflow-x-auto"><table class="w-full border-collapse min-w-max"><thead><tr class="bg-gray-100 text-gray-500 font-bold"><th class="py-4 px-6 text-left whitespace-nowrap">№</th><th class="py-4 px-6 text-left whitespace-nowrap">Имя заемщика</th><th class="py-4 px-6 text-left whitespace-nowrap">Дата займа</th><th class="py-4 px-6 text-left whitespace-nowrap">Сумма</th><th class="py-4 px-6 text-left whitespace-nowrap">Продолжительность</th></tr></thead><tbody></tbody></table></div></div>'),$t=O("<button> </button>"),Bt=O('<div class="bg-white rounded-2xl p-6 shadow-md"><header class="flex items-center gap-4 mb-6 pb-4 border-b border-gray-100"><button class="bg-transparent text-blue-600 py-2 px-4 rounded-lg hover:bg-gray-100 cursor-pointer transition-all duration-300">← Назад</button> <h2 class="m-0 flex-1">Добавить заемщика</h2></header> <div class="max-w-md mx-auto"><div class="mb-6"><label for="borrowerName" class="block mb-2 font-medium">ФИО</label> <input id="borrowerName" type="text" placeholder="Введите ФИО" class="w-full py-3 px-4 border border-gray-300 rounded-lg text-base box-border"/></div> <div class="mb-6"><label for="loanAmount" class="block mb-2 font-medium">Сумма</label> <input id="loanAmount" type="number" placeholder="Введите сумму" class="w-full py-3 px-4 border border-gray-300 rounded-lg text-base box-border"/> <div class="mt-4"><p class="m-0 mb-2 text-gray-500 text-sm">Популярные суммы займа:</p> <div class="flex gap-2 flex-wrap"></div></div></div> <div class="mb-6"><label for="loanDuration" class="block mb-2 font-medium">Продолжительность</label> <input id="loanDuration" type="text" placeholder="Например: 2 недели" class="w-full py-3 px-4 border border-gray-300 rounded-lg text-base box-border"/></div> <button class="w-full bg-blue-500 hover:bg-blue-700 text-white text-base font-medium py-4 px-6 rounded-lg cursor-pointer transition-all duration-300 border-none">Добавить</button></div></div>'),Pt=O('<tr class="border-b border-gray-100"><td class="py-3 px-4 whitespace-nowrap"> </td><td class="py-3 px-4 whitespace-nowrap"> </td><td class="py-3 px-4 whitespace-nowrap"> </td><td class="py-3 px-4 whitespace-nowrap"> </td><td class="py-3 px-4 whitespace-nowrap"> </td><td class="py-3 px-4 whitespace-nowrap"> </td></tr>'),Lt=O('<div class="bg-white rounded-lg border border-gray-100 overflow-x-auto"><table class="w-full border-collapse min-w-max"><thead><tr class="bg-gray-100 text-gray-500 font-bold"><th class="py-3 px-4 text-left whitespace-nowrap">№</th><th class="py-3 px-4 text-left whitespace-nowrap">Дата займа</th><th class="py-3 px-4 text-left whitespace-nowrap">Продолжительность</th><th class="py-3 px-4 text-left whitespace-nowrap">Дата возврата</th><th class="py-3 px-4 text-left whitespace-nowrap">Сумма</th><th class="py-3 px-4 text-left whitespace-nowrap">Комментарии</th></tr></thead><tbody></tbody></table></div>'),Vt=O('<p class="text-center text-gray-500 py-12">Нет истории займов</p>'),Ut=O('<div class="bg-white rounded-2xl p-6 shadow-md"><header class="flex items-center gap-4 mb-6 pb-4 border-b border-gray-100 flex-wrap"><button class="bg-transparent text-blue-600 py-2 px-4 rounded-lg hover:bg-gray-100 cursor-pointer transition-all duration-300">← Назад</button> <h2 class="m-0 flex-1"> </h2> <div class="flex gap-2"><button class="bg-gray-100 text-gray-900 py-3 px-6 rounded-lg hover:bg-gray-200 cursor-pointer transition-all duration-300 border-none font-medium text-sm">Закрыть позицию</button> <button class="bg-red-500 text-white py-3 px-6 rounded-lg hover:bg-red-700 cursor-pointer transition-all duration-300 border-none font-medium text-sm">Удалить позицию</button></div></header> <div class="bg-gray-100 p-4 rounded-lg mb-6 text-center"><h3 class="m-0 text-gray-900"> </h3></div> <!></div>'),Ft=O('<div class="bg-white rounded-2xl p-6 shadow-md"><header class="flex items-center gap-4 mb-6 pb-4 border-b border-gray-100"><button class="bg-transparent text-blue-600 py-2 px-4 rounded-lg hover:bg-gray-100 cursor-pointer transition-all duration-300">← Назад</button> <h2 class="m-0 flex-1">Закрытие позиции</h2></header> <div class="text-center py-12 px-6"><p class="text-lg mb-8"> </p> <div class="flex gap-4 justify-center"><button class="bg-red-500 text-white py-3 px-6 rounded-lg hover:bg-red-700 cursor-pointer transition-all duration-300 border-none font-medium text-sm">Да, закрыть</button> <button class="bg-gray-100 text-gray-900 py-3 px-6 rounded-lg hover:bg-gray-200 cursor-pointer transition-all duration-300 border-none font-medium text-sm">Отмена</button></div></div></div>'),Ot=O('<div class="max-w-6xl mx-auto p-5"><!></div>');function Zt(a,o){Rt(o,!1);let e=be("main"),v=be("current"),l=be(null),d=be(16e4),c={normal:70,overdue:15,early:15},m=be([{id:1,name:"Игорь Давлатов",date:"06.12.2025",amount:8e4,duration:"5 недель",overdue:!1,earlyReturn:!1,history:[{id:1,date:"06.12.2025",duration:"1 неделя",returnDate:"13.12.2025",amount:8e4,comment:"-"},{id:2,date:"06.12.2025",duration:"1 неделя",returnDate:"13.12.2025",amount:8e4,comment:"-"},{id:3,date:"06.12.2025",duration:"1 неделя",returnDate:"13.12.2025",amount:8e4,comment:"Проблема с оплатой"},{id:4,date:"06.12.2025",duration:"1 неделя",returnDate:"13.12.2025",amount:8e4,comment:"-"}],totalHistoryAmount:1324490},{id:2,name:"Лапшичкин Петр Владимирович",date:"08.12.2025",amount:4e4,duration:"2 недели",overdue:!1,earlyReturn:!1},{id:3,name:"Нариманов Наряман",date:"06.12.2025",amount:4e4,duration:"2 недели",overdue:!0,overdueDays:2,earlyReturn:!1},{id:4,name:"Нариманов Наряман",date:"12.11.2025",amount:39e4,duration:"1 год",overdue:!1,earlyReturn:!0,earlyDays:5}]),i=be({name:"",amount:0,duration:""}),_=[1e4,2e4,3e4,5e4,1e5];const k=f=>new Intl.NumberFormat("ru-RU",{minimumFractionDigits:0,maximumFractionDigits:0}).format(f)+" руб.",te=()=>{H(e,"addBorrower")},u=f=>{H(l,f),H(e,"borrowerHistory")},g=()=>{H(e,"closePosition")},p=()=>{const f=t(m).length>0?Math.max(...t(m).map(T=>T.id))+1:1;H(m,[...t(m),{id:f,name:t(i).name,date:new Date().toLocaleDateString("ru-RU"),amount:t(i).amount,duration:t(i).duration,overdue:!1,earlyReturn:!1}]),H(d,t(d)+t(i).amount),H(i,{name:"",amount:0,duration:""}),H(e,"main")},b=()=>{H(e,"main"),H(l,null)},x=()=>{alert("Позиция закрыта"),H(e,"main")},Q=()=>{t(l)&&(H(m,t(m).filter(f=>f.id!==t(l).id)),H(d,t(d)-t(l).amount),H(e,"main"))},L=f=>{Ae(i,t(i).amount=f)};tt();var h=Ot(),R=n(h);{var y=f=>{var T=St(),A=s(n(T),2),q=n(A),Z=s(n(q),2),I=n(Z,!0);r(Z),r(q);var W=s(q,2),X=n(W),oe=n(X),ue=s(oe,2),V=s(ue,2);r(X);var U=s(X,2),$=n(U),G=n($);r($);var M=s($,2),J=n(M);r(M);var B=s(M,2),ae=n(B);r(B),r(U),r(W),r(A);var K=s(A,4),D=n(K),z=s(D,2);r(K);var P=s(K,4),re=s(P,2),le=n(re),we=s(n(le));Ue(we,5,()=>t(m),Ve,(F,E,ke)=>{var ne=Nt(),De=n(ne);De.textContent=ke+1;var j=s(De),he=n(j,!0);r(j);var ve=s(j),Te=n(ve,!0);r(ve);var ce=s(ve),He=n(ce,!0);r(ce);var me=s(ce),Ee=n(me),fe=s(Ee);{var Ce=N=>{var se=It(),ye=n(se);r(se),de(()=>w(ye,`просрочка на ${t(E).overdueDays??""} дня`)),C(N,se)};pe(fe,N=>{t(E).overdue&&N(Ce)})}var _e=s(fe,2);{var Ie=N=>{var se=Mt(),ye=n(se);r(se),de(()=>w(ye,`отдал раньше на ${t(E).earlyDays??""} дней`)),C(N,se)};pe(_e,N=>{t(E).earlyReturn&&N(Ie)})}r(me),r(ne),de(N=>{Re(ne,1,`border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-all duration-300
                  ${t(E).overdue?"bg-red-50":""} 
                  ${t(E).earlyReturn?"bg-blue-50":""}`),w(he,t(E).name),w(Te,t(E).date),w(He,N),w(Ee,`${t(E).duration??""} `)},[()=>k(t(E).amount)]),S("click",ne,()=>u(t(E))),S("keydown",ne,N=>N.key==="Enter"&&u(t(E))),C(F,ne)}),r(we),r(le),r(re),r(T),de(F=>{w(I,F),Pe(oe,`width: ${c.normal}%`),Pe(ue,`width: ${c.overdue}%`),Pe(V,`width: ${c.early}%`),w(G,`${c.normal}%`),w(J,`${c.overdue}%`),w(ae,`${c.early}%`),Re(D,1,`py-2 px-4 rounded-md text-sm font-medium transition-all duration-300 cursor-pointer border-none
            ${t(v)==="current"?"bg-white text-gray-900 shadow-sm":"bg-transparent text-gray-500 hover:text-gray-700"}`),Re(z,1,`py-2 px-4 rounded-md text-sm font-medium transition-all duration-300 cursor-pointer border-none
            ${t(v)==="all"?"bg-white text-gray-900 shadow-sm":"bg-transparent text-gray-500 hover:text-gray-700"}`)},[()=>k(t(d))]),S("click",D,()=>H(v,"current")),S("click",z,()=>H(v,"all")),S("click",P,te),C(f,T)},Y=f=>{var T=$e(),A=Be(T);{var q=I=>{var W=Bt(),X=n(W),oe=n(X);Ze(2),r(X);var ue=s(X,2),V=n(ue),U=s(n(V),2);Le(U),r(V);var $=s(V,2),G=s(n($),2);Le(G);var M=s(G,2),J=s(n(M),2);Ue(J,5,()=>_,Ve,(D,z)=>{var P=$t(),re=n(P,!0);r(P),de(le=>{Re(P,1,`py-2 px-4 rounded-lg cursor-pointer transition-all duration-300 border-none font-medium text-sm
                    ${t(i).amount===t(z)?"bg-blue-500 text-white":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`),w(re,le)},[()=>t(z).toLocaleString("ru-RU")]),S("click",P,()=>L(t(z))),C(D,P)}),r(J),r(M),r($);var B=s($,2),ae=s(n(B),2);Le(ae),r(B);var K=s(B,2);r(ue),r(W),S("click",oe,b),Oe(U,()=>t(i).name,D=>Ae(i,t(i).name=D)),Oe(G,()=>t(i).amount,D=>Ae(i,t(i).amount=D)),Oe(ae,()=>t(i).duration,D=>Ae(i,t(i).duration=D)),S("click",K,p),C(I,W)},Z=I=>{var W=$e(),X=Be(W);{var oe=V=>{var U=Ut(),$=n(U),G=n($),M=s(G,2),J=n(M);r(M);var B=s(M,2),ae=n(B),K=s(ae,2);r(B),r($);var D=s($,2),z=n(D),P=n(z);r(z),r(D);var re=s(D,2);{var le=F=>{var E=Lt(),ke=n(E),ne=s(n(ke));Ue(ne,5,()=>t(l).history,Ve,(De,j)=>{var he=Pt(),ve=n(he),Te=n(ve,!0);r(ve);var ce=s(ve),He=n(ce,!0);r(ce);var me=s(ce),Ee=n(me,!0);r(me);var fe=s(me),Ce=n(fe,!0);r(fe);var _e=s(fe),Ie=n(_e,!0);r(_e);var N=s(_e),se=n(N,!0);r(N),r(he),de(ye=>{w(Te,t(j).id),w(He,t(j).date),w(Ee,t(j).duration),w(Ce,t(j).returnDate),w(Ie,ye),w(se,t(j).comment)},[()=>k(t(j).amount)]),C(De,he)}),r(ne),r(ke),r(E),C(F,E)},we=F=>{var E=Vt();C(F,E)};pe(re,F=>{t(l)?.history?F(le):F(we,!1)})}r(U),de(F=>{w(J,`История заемщика - ${t(l)?.name??""}`),w(P,`Общая сумма займа: ${F??""}`)},[()=>t(l)?.totalHistoryAmount?k(t(l).totalHistoryAmount):k(t(l)?.amount)]),S("click",G,b),S("click",ae,g),S("click",K,Q),C(V,U)},ue=V=>{var U=$e(),$=Be(U);{var G=M=>{var J=Ft(),B=n(J),ae=n(B);Ze(2),r(B);var K=s(B,2),D=n(K),z=n(D);r(D);var P=s(D,2),re=n(P),le=s(re,2);r(P),r(K),r(J),de(()=>w(z,`Вы уверены, что хотите закрыть позицию для ${t(l)?.name??""}?`)),S("click",ae,b),S("click",re,x),S("click",le,b),C(M,J)};pe($,M=>{t(e)==="closePosition"&&M(G)},!0)}C(V,U)};pe(X,V=>{t(e)==="borrowerHistory"?V(oe):V(ue,!1)},!0)}C(I,W)};pe(A,I=>{t(e)==="addBorrower"?I(q):I(Z,!1)},!0)}C(f,T)};pe(R,f=>{t(e)==="main"?f(y):f(Y,!1)})}r(h),C(a,h),Tt()}export{Zt as component};
